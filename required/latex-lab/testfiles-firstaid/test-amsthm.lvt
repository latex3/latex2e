% !Mode:: "TeX:DE:UTF-8:Main"

\DocumentMetadata{tagging=on,debug={log=vv},pdfstandard=a-4,pdfversion=2.0}
\input{regression-test}
\RequirePackage{tagpdf-debug}
\documentclass{article}
\usepackage{amsthm}
\newtheorem{lem}{Lemma}
\newtheorem*{KL}{Klein's Lemma}

\theoremstyle{remark}
\newtheorem{remark}{Remark}[section]

\swapnumbers
\newtheorem{theorem}[lem]{Theorem}

\swapnumbers
\newtheoremstyle{mytheorem}
  {\topsep}
  {\topsep}
  {}
  {1em}
  {\bfseries}
  {.}
  { }
  {%
%    \@ifempty{#3}
%      {\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}}
%      {\thmname{#3}}%
  \thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}% above never worked as @ is not a letter here!
  }
  
\theoremstyle{mytheorem}
\newtheorem{thm}{Theorem}
\usepackage{hyperref}
\begin{document}
\START
\begin{lem}[name] some lemma \end{lem}

\begin{KL}  some lemma \end{KL}

\begin{KL}[with addition]  some lemma \end{KL}

\begin{remark} remark \end{remark}

\begin{theorem}\label{thm} theorem \end{theorem}

\begin{thm}[name] thm\end{thm}

\begin{thm} thm\end{thm}

\begin{proof} 
some proof 
\end{proof}
after the proof

\ref{thm}
\ShowTagging{debug/structures}
\end{document}
