%
% Copyright (C) The LaTeX Project
%

\input{regression-test}
\ExplSyntaxOn
\debug_on:n { check-declarations , log-functions }
\ExplSyntaxOff

\START

\AUTHOR{Joseph Wright}

\ExplSyntaxOn

\TEST { Get~and~show~argument~spec }
  {
    \OMIT
    \DeclareDocumentCommand { \fooa } { s o m } { }
    \DeclareDocumentCommand { \foob } { s o +O { } +m  } { } % \newcommand ;-)
    \DeclareDocumentEnvironment { foo } { o m } { } { }
    \TIMO
    \TYPE { \cmd_arg_spec:N \fooa }
    \TYPE { \cmd_arg_spec:N \foob }
    \TYPE { \cmd_arg_spec:c { foo } }
  }

\TEST { Arg~spec~for~non-ltcmd~tokens }
  {
    \TYPE { \cmd_arg_spec:N \newcommand }
    \TYPE { \cmd_arg_spec:N \space }
    \TYPE { \cmd_arg_spec:N \undefined }
  }

\TEST { Optimised~specs }
  {
    \OMIT
    \DeclareDocumentCommand \fooa { } { }
    \DeclareDocumentCommand \foob { mmm } { }
    \DeclareDocumentCommand \fooc { +m +m +m } { }
    \TIMO
    \TYPE { \cmd_arg_spec:N \fooa }
    \TYPE { \cmd_arg_spec:N \foob }
    \TYPE { \cmd_arg_spec:N \fooc }
  }

\END